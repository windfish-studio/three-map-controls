{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///delegated ./node_modules/three/build/three.module.js from dll-reference vendor","webpack:///delegated ./node_modules/lodash/lodash.js from dll-reference vendor","webpack:///external \"vendor\"","webpack:///./src/three-map-controls.js","webpack:///./src/demo.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","vendor","MapControls","three__WEBPACK_IMPORTED_MODULE_0__","constructor","camera","domElement","options","super","this","undefined","document","enabled","target","minDistance","maxDistance","enableZoom","zoomSpeed","zoomDampingAlpha","initialZoom","enablePan","keyPanSpeed","panDampingAlpha","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ZOOM","MIDDLE","PAN","lodash__WEBPACK_IMPORTED_MODULE_1___default","a","extend","target0","clone","position0","position","zoom0","zoom","_mouse","_finalTargetDistance","_currentTargetDistance","_changeEvent","type","_startEvent","_endEvent","_STATES","NONE","DOLLY","TOUCH_DOLLY","TOUCH_PAN","_state","_panTarget","_panCurrent","_minZoomPosition","_maxZoomPosition","_panStart","_panEnd","_panDelta","_dollyStart","_dollyEnd","_dollyDelta","_camOrientation","_lastMouse","_zoomAlpha","_init","distanceToPoint","Error","_straightDollyTrack","lerpVectors","Math","abs","lookAt","sub","normalize","_updateZoomAlpha","addEventListener","_onContextMenu","bind","_onMouseDown","_onMouseWheel","_onTouchStart","_onTouchEnd","_onTouchMove","_onKeyDown","update","_intersectCameraTarget","intersection","ray","each","orientation","normal","multiplyScalar","intersectPlane","_updateDollyTrack","getZoomAlpha","reset","copy","updateProjectionMatrix","dispatchEvent","panDelta","oldPanCurrent","lerp","subVectors","add","dispose","removeEventListener","_onMouseMove","_onMouseUp","zoomToFit","mesh","center","width","height","geometry","boundingSphere","radius","localToWorld","vFOV","fov","PI","hFOV","atan","tan","aspect","obj_aspect","max","min","diff","damping_alpha","round","intersect","addVectors","_calculateMinZoom","length","_getZoomScale","pow","_panLeft","distance","cameraMatrix","v","setFromMatrixColumn","_panUp","_pan","deltaX","deltaY","element","body","targetDistance","distanceToPlane","clientHeight","matrix","_dollyIn","dollyScale","_cameraOfKnownType","console","warn","_dollyOut","_handleUpdateDollyTrackMouse","event","prevMouse","set","offsetX","clientWidth","offsetY","equals","rc","setFromCamera","_handleMouseDownDolly","_handleMouseDownPan","_handleMouseMoveDolly","y","_handleMouseMovePan","x","_handleMouseUp","cam_pos","map_intersect","_handleMouseWheel","delta","wheelDelta","detail","_handleKeyDown","keyCode","_handleUpdateDollyTrackTouch","centerpoint","dx","touches","pageX","dy","pageY","mouse","_handleTouchStartDolly","sqrt","_handleTouchStartPan","_handleTouchMoveDolly","_handleTouchMovePan","_handleTouchEnd","preventDefault","button","stopPropagation","__webpack_exports__","THREE","default","_","load","scene","renderer","controls","container","meshes","dims","selectedObject","zoomTo","pick","Vector2","clientX","clientY","raycaster","Raycaster","intersects","intersectObjects","children","onWindowResize","setSize","window","innerWidth","innerHeight","PerspectiveCamera","z","Scene","CubeGeometry","material","MeshNormalMaterial","Mesh","push","computeBoundingSphere","WebGLRenderer","setPixelRatio","devicePixelRatio","appendChild","Plane","Vector3","init","animate","requestAnimationFrame","rotation","render","readyState","onload"],"mappings":"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","file":"demo.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","module.exports = (__webpack_require__(2))(67);","module.exports = (__webpack_require__(2))(66);","module.exports = vendor;","'use strict';\n\n//Alex Pilafian 2016 - sikanrong@gmail.com\n\nimport * as THREE from 'three'\nimport _ from 'lodash'\n\nclass MapControls extends THREE.EventDispatcher{\n\n        constructor(camera, domElement, options){\n            super();\n\n            this.camera = camera;\n\n            //Object to use for listening for keyboard/mouse events\n            this.domElement = ( domElement !== undefined ) ? domElement : document;\n\n            // Set to false to disable this control (Disables all input events)\n            this.enabled = true;\n\n            // Must be set to instance of THREE.Plane\n            this.target;\n\n            // How far you can dolly in and out\n            this.minDistance = 1; //probably should never be 0\n            this.maxDistance = 100;\n\n            // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n            // Set to false to disable zooming\n            this.enableZoom = true;\n            this.zoomSpeed = 6.0;\n            this.zoomDampingAlpha = 0.1;\n            this.initialZoom = 0; //start zoomed all the way out unless set in options.\n\n            // Set to false to disable panning\n            this.enablePan = true;\n            this.keyPanSpeed = 12.0;\t// pixels moved per arrow key push\n            this.panDampingAlpha = 0.1;\n\n            // Set to false to disable use of the keys\n            this.enableKeys = true;\n\n            // The four arrow keys\n            this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n            // Mouse buttons\n            this.mouseButtons = { ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.LEFT };\n\n            //Copy options from parameters\n            _.extend(this, options);\n\n            // for reset\n            this.target0 = this.target.clone();\n            this.position0 = this.camera.position.clone();\n            this.zoom0 = this.camera.zoom;\n\n            this._mouse = new THREE.Vector2();\n\n            this._finalTargetDistance;\n            this._currentTargetDistance;\n\n            this._changeEvent = { type: 'change' };\n            this._startEvent = { type: 'start' };\n            this._endEvent = { type: 'end' };\n\n            this._STATES = { NONE : - 1, DOLLY : 1, PAN : 2, TOUCH_DOLLY : 4, TOUCH_PAN : 5 };\n            this._state = this._STATES.NONE;\n\n            this._panTarget = new THREE.Vector3();\n            this._panCurrent = new THREE.Vector3();\n\n            this._minZoomPosition = new THREE.Vector3();\n            this._maxZoomPosition = new THREE.Vector3();\n\n            this._panStart = new THREE.Vector2();\n            this._panEnd = new THREE.Vector2();\n            this._panDelta = new THREE.Vector2();\n\n            this._dollyStart = new THREE.Vector2();\n            this._dollyEnd = new THREE.Vector2();\n            this._dollyDelta = new THREE.Vector2();\n\n            this._camOrientation = new THREE.Vector2();\n            this._lastMouse = new THREE.Vector2();\n\n            this._zoomAlpha;\n\n            this._init();\n        }\n\n        _init (){\n            if(this.target.distanceToPoint(this.camera.position) == 0){\n                throw new Error(\"ORIENTATION_UNKNOWABLE: initial Camera position cannot intersect target plane.\");\n            }\n\n            //establish initial camera orientation based on position w.r.t. _this.target plane\n            this._straightDollyTrack();\n\n            this.camera.position.lerpVectors(this._minZoomPosition, this._maxZoomPosition, this.initialZoom);\n            this._finalTargetDistance = this._currentTargetDistance = Math.abs(this.target.distanceToPoint(this.camera.position));\n\n            this.camera.lookAt(this._maxZoomPosition); //set the orientation of the camera towards the map.\n            this._camOrientation = this._maxZoomPosition.clone().sub(this.camera.position).normalize();\n\n            this._updateZoomAlpha();\n\n            //Assign event listeners\n\n            this.domElement.addEventListener( 'contextmenu', this._onContextMenu.bind(this), false );\n\n            this.domElement.addEventListener( 'mousedown', this._onMouseDown.bind(this), false );\n            this.domElement.addEventListener( 'mousewheel', this._onMouseWheel.bind(this), false );\n            this.domElement.addEventListener( 'MozMousePixelScroll', this._onMouseWheel.bind(this), false ); // firefox\n\n            this.domElement.addEventListener( 'touchstart', this._onTouchStart.bind(this), false );\n            this.domElement.addEventListener( 'touchend', this._onTouchEnd.bind(this), false );\n            this.domElement.addEventListener( 'touchmove', this._onTouchMove.bind(this), false );\n\n            this.domElement.addEventListener( 'keydown', this._onKeyDown.bind(this), false );\n\n\n            this.update();\n        }\n\n        _intersectCameraTarget(){\n            var intersection, ray;\n            _.each([-1, 1], function(orientation){\n                if(intersection)\n                    return;\n\n                ray = new THREE.Ray(this.camera.position, this.target.normal.clone().multiplyScalar(orientation));\n                intersection = ray.intersectPlane(this.target);\n            }.bind(this));\n\n            return {\n                intersection: intersection,\n                ray: ray\n            }\n        }\n\n        _straightDollyTrack(){\n            this._updateDollyTrack(this._intersectCameraTarget().ray);\n        }\n\n        getZoomAlpha () {\n            return this._zoomAlpha;\n        }\n\n        reset () {\n\n            this.target.copy( this.target0 );\n            this.camera.position.copy( this.position0 );\n            this.camera.zoom = this.zoom0;\n\n            this.camera.updateProjectionMatrix();\n\n            this._init(); //reinit\n\n            this.dispatchEvent( this._changeEvent );\n\n            this.update();\n\n            this._state = this._STATES.NONE;\n\n        };\n\n        // this method is exposed, but perhaps it would be better if we can make it private...\n        update () {\n            var panDelta = new THREE.Vector3();\n            var oldPanCurrent = new THREE.Vector3();\n            var position = this.camera.position;\n\n            // move target to panned location\n            oldPanCurrent.copy(this._panCurrent);\n            this._panCurrent.lerp( this._panTarget, this.panDampingAlpha );\n            panDelta.subVectors(this._panCurrent, oldPanCurrent);\n\n            this._maxZoomPosition.add(panDelta);\n            this._minZoomPosition.add(panDelta);\n\n            position.lerpVectors(this._minZoomPosition, this._maxZoomPosition, this._updateZoomAlpha());\n        }\n\n        dispose () {\n            this.domElement.removeEventListener( 'contextmenu', this._onContextMenu, false );\n            this.domElement.removeEventListener( 'mousedown', this._onMouseDown, false );\n            this.domElement.removeEventListener( 'mousewheel', this._onMouseWheel, false );\n            this.domElement.removeEventListener( 'MozMousePixelScroll', this._onMouseWheel, false ); // firefox\n\n            this.domElement.removeEventListener( 'touchstart', this._onTouchStart, false );\n            this.domElement.removeEventListener( 'touchend', this._onTouchEnd, false );\n            this.domElement.removeEventListener( 'touchmove', this._onTouchMove, false );\n\n            document.removeEventListener( 'mousemove', this._onMouseMove, false );\n            document.removeEventListener( 'mouseup', this._onMouseUp, false );\n\n            this.domElement.removeEventListener( 'keydown', this._onKeyDown, false );\n        };\n\n        zoomToFit (mesh, center, width, height){\n            //if only width is passed interpret it as radius and set height equal to width\n            center = center || mesh.geometry.boundingSphere.center;\n            width = width || (mesh.geometry.boundingSphere.radius * 2);\n\n            if(height === undefined)\n                height = width;\n\n            this._panTarget.copy(mesh.localToWorld(center.clone()));\n            this._panCurrent.copy(this._intersectCameraTarget().intersection);\n\n            this._straightDollyTrack();\n\n            var vFOV = this.camera.fov * (Math.PI / 180);\n            var hFOV = 2 * Math.atan( Math.tan( vFOV / 2 ) * this.camera.aspect );\n            var obj_aspect = width / height;\n\n            this._finalTargetDistance = ((((obj_aspect > this.camera.aspect)? width : height) / 2) / Math.tan(((obj_aspect > this.camera.aspect)? hFOV : vFOV) / 2));\n\n\n        };\n\n        _updateZoomAlpha(){\n            this._finalTargetDistance = Math.max( this.minDistance, Math.min( this.maxDistance, this._finalTargetDistance ) );\n            var diff = this._currentTargetDistance - this._finalTargetDistance;\n            var damping_alpha = this.zoomDampingAlpha;\n            this._currentTargetDistance -= diff * damping_alpha;\n            var rounding_places = 100000;\n            this._zoomAlpha = Math.abs(Math.round((1 - ((this._currentTargetDistance - this.minDistance) / (this.maxDistance - this.minDistance))) * rounding_places ) / rounding_places);\n\n            return this._zoomAlpha;\n        }\n\n        _updateDollyTrack(ray){\n\n            // calculate cameras intersecting the picking ray\n            var intersect = ray.intersectPlane(this.target);\n\n            if(intersect){\n                this._maxZoomPosition.addVectors(intersect, new THREE.Vector3().subVectors(this.camera.position, intersect).normalize().multiplyScalar(this.minDistance));\n                this._minZoomPosition.copy(this._calculateMinZoom(this.camera.position, intersect));\n\n                this._finalTargetDistance = this._currentTargetDistance = intersect.clone().sub(this.camera.position).length();\n            }\n        }\n\n        _getZoomScale() {\n            return Math.pow( 0.95, this.zoomSpeed );\n        }\n\n\n        _panLeft( distance, cameraMatrix ) {\n            var v = new THREE.Vector3();\n\n            v.setFromMatrixColumn( cameraMatrix, 0 ); // get X column of cameraMatrix\n            v.multiplyScalar( - distance );\n\n            this._panTarget.add( v );\n        }\n\n        _panUp ( distance, cameraMatrix ) {\n\n            var v = new THREE.Vector3();\n\n            v.setFromMatrixColumn( cameraMatrix, 1 ); // get Y column of cameraMatrix\n            v.multiplyScalar( distance );\n\n            this._panTarget.add( v );\n\n        }\n\n        // deltaX and deltaY are in pixels; right and down are positive\n        _pan (deltaX, deltaY) {\n\n            var element = this.domElement === document ? this.domElement.body : this.domElement;\n\n            var r = new THREE.Ray(this.camera.position, this._camOrientation);\n            var targetDistance = r.distanceToPlane(this.target);\n\n            // half of the fov is center to top of screen\n            targetDistance *= Math.tan( ( this.camera.fov / 2 ) * Math.PI / 180.0 );\n\n            // we actually don't use screenWidth, since perspective camera is fixed to screen height\n            this._panLeft( 2 * deltaX * targetDistance / element.clientHeight, this.camera.matrix );\n            this._panUp( 2 * deltaY * targetDistance / element.clientHeight, this.camera.matrix );\n\n        }\n\n        _dollyIn( dollyScale ) {\n            if ( this._cameraOfKnownType() ) {\n                this._finalTargetDistance /= dollyScale;\n            } else {\n                console.warn( 'WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n                this.enableZoom = false;\n            }\n        }\n\n        _dollyOut( dollyScale ) {\n            if ( this._cameraOfKnownType() ) {\n                this._finalTargetDistance *= dollyScale;\n            } else {\n                console.warn( 'WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n                this.enableZoom = false;\n            }\n        }\n\n        _cameraOfKnownType() {\n            return this.camera.type === 'PerspectiveCamera'\n        }\n\n        _handleUpdateDollyTrackMouse(event){\n            var prevMouse = this._mouse.clone();\n            this._mouse.set(( event.offsetX / this.domElement.clientWidth ) * 2 - 1, - ( event.offsetY / this.domElement.clientHeight ) * 2 + 1);\n\n            if(!prevMouse.equals(this._mouse)){\n                var rc = new THREE.Raycaster();\n                rc.setFromCamera(this._mouse, this.camera);\n                this._updateDollyTrack(rc.ray);\n            }\n        }\n\n        _handleMouseDownDolly( event ) {\n            this._handleUpdateDollyTrackMouse(event);\n            this._dollyStart.set( event.offsetX, event.offsetY );\n        }\n\n        _handleMouseDownPan( event ) {\n\n            this._panStart.set( event.offsetX, event.offsetY );\n\n        }\n\n        _handleMouseMoveDolly( event ) {\n\n            this._handleUpdateDollyTrackMouse(event);\n\n            //console.log( 'handleMouseMoveDolly' );\n\n            this._dollyEnd.set( event.offsetX, event.offsetY );\n\n            this._dollyDelta.subVectors(this._dollyEnd, this._dollyStart );\n\n            if ( this._dollyDelta.y > 0 ) {\n\n                this._dollyIn( this._getZoomScale() );\n\n            } else if ( this._dollyDelta.y < 0 ) {\n\n                this._dollyOut( this._getZoomScale() );\n\n            }\n\n            this._dollyStart.copy( this._dollyEnd );\n\n            this.update();\n\n        }\n\n        _handleMouseMovePan( event ) {\n\n            //console.log( 'handleMouseMovePan' );\n\n            this._panEnd.set( event.offsetX, event.offsetY );\n\n            this._panDelta.subVectors( this._panEnd, this._panStart );\n\n            this._pan( this._panDelta.x, this._panDelta.y );\n\n            this._panStart.copy( this._panEnd );\n\n            this.update();\n\n        }\n\n        _handleMouseUp( event ) {\n\n            //console.log( 'handleMouseUp' );\n\n        }\n\n        _calculateMinZoom(cam_pos, map_intersect){\n            return map_intersect.clone().add(\n                cam_pos.clone()\n                .sub(map_intersect)\n                .normalize()\n                .multiplyScalar(this.maxDistance)\n            );\n        }\n\n\n        _handleMouseWheel( event ) {\n            this._handleUpdateDollyTrackMouse(event);\n\n            var delta = 0;\n\n            if ( event.wheelDelta !== undefined ) {\n\n                // WebKit / Opera / Explorer 9\n\n                delta = event.wheelDelta;\n\n            } else if ( event.detail !== undefined ) {\n\n                // Firefox\n\n                delta = - event.detail;\n\n            }\n\n            if ( delta > 0 ) {\n                this._dollyOut( this._getZoomScale() );\n            } else if ( delta < 0 ) {\n                this._dollyIn( this._getZoomScale() );\n            }\n\n            this.update();\n        }\n\n        _handleKeyDown( event ) {\n\n            //console.log( 'handleKeyDown' );\n\n            switch ( event.keyCode ) {\n\n                case this.keys.UP:\n                    this._pan( 0, this.keyPanSpeed );\n                    this.update();\n                    break;\n\n                case this.keys.BOTTOM:\n                    this._pan( 0, - this.keyPanSpeed );\n                    this.update();\n                    break;\n\n                case this.keys.LEFT:\n                    this._pan( this.keyPanSpeed, 0 );\n                    this.update();\n                    break;\n\n                case this.keys.RIGHT:\n                    this._pan( - this.keyPanSpeed, 0 );\n                    this.update();\n                    break;\n\n            }\n\n        }\n\n        _handleUpdateDollyTrackTouch( event ){\n            var centerpoint = new THREE.Vector2();\n\n            var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n            var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n            centerpoint.x = event.touches[ 0 ].pageX + (dx / 2);\n            centerpoint.y = event.touches[ 0 ].pageY + (dy / 2);\n\n            var mouse = new THREE.Vector2();\n            mouse.x = ( centerpoint.x / domElement.clientWidth ) * 2 - 1;\n            mouse.y = - ( centerpoint.y / domElement.clientHeight ) * 2 + 1;\n\n            this._updateDollyTrack(mouse);\n        }\n\n        _handleTouchStartDolly( event ) {\n            this._handleUpdateDollyTrackTouch(event);\n\n            var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n            var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n            var distance = Math.sqrt( dx * dx + dy * dy );\n\n            this._dollyStart.set( 0, distance );\n\n        }\n\n        _handleTouchStartPan( event ) {\n\n            //console.log( 'handleTouchStartPan' );\n\n            this._panStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n        }\n\n\n        _handleTouchMoveDolly( event ) {\n            this._handleUpdateDollyTrackTouch(event);\n\n            //console.log( 'handleTouchMoveDolly' );\n\n            var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n            var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n            var distance = Math.sqrt( dx * dx + dy * dy );\n\n            this._dollyEnd.set( 0, distance );\n\n            this._dollyDelta.subVectors( this._dollyEnd, this._dollyStart );\n\n            if ( this._dollyDelta.y > 0 ) {\n\n                this._dollyOut( this._getZoomScale() );\n\n            } else if ( this._dollyDelta.y < 0 ) {\n\n                this._dollyIn( this._getZoomScale() );\n\n            }\n\n            this._dollyStart.copy( this._dollyEnd );\n\n            this.update();\n\n        }\n\n        _handleTouchMovePan( event ) {\n\n            this._panEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n            this._panDelta.subVectors( this._panEnd, this._panStart );\n\n            this._pan( this._panDelta.x, this._panDelta.y );\n\n            this._panStart.copy( this._panEnd );\n\n            this.update();\n\n        }\n\n        _handleTouchEnd( event ) {\n            //console.log( 'handleTouchEnd' );\n        }\n\n        //\n        // event handlers - FSM: listen for events and reset state\n        //\n\n        _onMouseDown( event ) {\n\n            if ( this.enabled === false ) return;\n\n            event.preventDefault();\n\n            if ( event.button === this.mouseButtons.ZOOM ) {\n\n                if ( this.enableZoom === false ) return;\n\n                this._handleMouseDownDolly( event );\n\n                this._state = this._STATES.DOLLY;\n\n            } else if ( event.button === this.mouseButtons.PAN ) {\n\n                if ( this.enablePan === false ) return;\n\n                this._handleMouseDownPan( event );\n\n                this._state = this._STATES.PAN;\n\n            }\n\n            if ( this._state !== this._STATES.NONE ) {\n\n                document.addEventListener( 'mousemove', this._onMouseMove.bind(this), false );\n                document.addEventListener( 'mouseup', this._onMouseUp.bind(this), false );\n\n                this.dispatchEvent( this._startEvent );\n\n            }\n\n        }\n\n        _onMouseMove( event ) {\n\n            if ( this.enabled === false ) return;\n\n            event.preventDefault();\n\n            if ( this._state === this._STATES.DOLLY ) {\n\n                if ( this.enableZoom === false ) return;\n\n                this._handleMouseMoveDolly( event );\n\n            } else if ( this._state === this._STATES.PAN ) {\n\n                if ( this.enablePan === false ) return;\n\n                this._handleMouseMovePan( event );\n            }\n        }\n\n        _onMouseUp( event ) {\n\n            if ( this.enabled === false ) return;\n\n            this._handleMouseUp( event );\n\n            document.removeEventListener( 'mousemove', this._onMouseMove, false );\n            document.removeEventListener( 'mouseup', this._onMouseUp, false );\n\n            this.dispatchEvent( this._endEvent );\n\n            this._state = this._STATES.NONE;\n\n        }\n\n        _onMouseWheel( event ) {\n            if ( this.enabled === false || this.enableZoom === false || ( this._state !== this._STATES.NONE ) ) return;\n\n            event.preventDefault();\n            event.stopPropagation();\n\n            this._handleMouseWheel( event );\n\n            this.dispatchEvent( this._startEvent ); // not sure why these are here...\n            this.dispatchEvent( this._endEvent );\n\n        }\n\n        _onKeyDown( event ) {\n\n            if ( this.enabled === false || this.enableKeys === false || this.enablePan === false ) return;\n\n            this._handleKeyDown( event );\n\n        }\n\n        _onTouchStart( event ) {\n\n            if ( this.enabled === false ) return;\n\n            switch ( event.touches.length ) {\n                case 1: // three-fingered touch: pan\n\n                    if ( this.enablePan === false ) return;\n\n                    this._handleTouchStartPan( event );\n\n                    this._state = this._STATES.TOUCH_PAN;\n\n                    break;\n\n                case 2:\t// two-fingered touch: dolly\n\n                    if ( this.enableZoom === false ) return;\n\n                    this._handleTouchStartDolly( event );\n\n                    this._state = this._STATES.TOUCH_DOLLY;\n\n                    break;\n\n                default:\n\n                    this._state = this._STATES.NONE;\n\n            }\n\n            if ( this._state !== this._STATES.NONE ) {\n\n                this.dispatchEvent( this._startEvent );\n\n            }\n\n        }\n\n        _onTouchMove( event ) {\n\n            if ( this.enabled === false ) return;\n\n            event.preventDefault();\n            event.stopPropagation();\n\n            switch ( event.touches.length ) {\n\n                case 1: // one-fingered touch: pan\n                    if ( this.enablePan === false ) return;\n                    if ( this._state !== this._STATES.TOUCH_PAN ) return; // is this needed?...\n\n                    this._handleTouchMovePan( event );\n\n                    break;\n\n                case 2: // two-fingered touch: dolly\n\n                    if ( this.enableZoom === false ) return;\n                    if ( this._state !== this._STATES.TOUCH_DOLLY ) return; // is this needed?...\n\n                    this._handleTouchMoveDolly( event );\n\n                    break;\n\n                default:\n\n                    this._state = this._STATES.NONE;\n\n            }\n\n        }\n\n        _onTouchEnd( event ) {\n\n            if ( this.enabled === false ) return;\n\n            this._handleTouchEnd( event );\n\n            this.dispatchEvent( this._endEvent );\n\n            this._state = this._STATES.NONE;\n\n        }\n\n        _onContextMenu( event ) {\n            event.preventDefault();\n        }\n\n};\n\nTHREE.MapControls = MapControls;\nexport default MapControls;\n","var THREE = require('three');\nvar MapControls = require('./three-map-controls.js').default || THREE.MapControls;\nvar _ = require('lodash');\n\nvar load = function(){\n    var container = document.body;\n    var scene, renderer;\n    var meshes = [];\n    var dims = 10;\n    var selectedObject = null;\n    var controls;\n\n    init();\n    animate();\n\n    function init(){\n        var camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 1000 );\n        camera.position.z = 20;\n\n        scene = new THREE.Scene();\n\n        var offset = 3;\n\n        for(var x = 0; x < dims; x++){\n            for(var y = 0; y < dims; y++){\n                var geometry = new THREE.CubeGeometry(1, 1, 1);\n                var material = new THREE.MeshNormalMaterial();\n\n                var mesh = new THREE.Mesh( geometry, material );\n                mesh.position.x += ((-0.5 * dims * offset) + (x * offset));\n                mesh.position.y += ((-0.5 * dims * offset) + (y * offset));\n\n                meshes.push(mesh);\n\n                scene.add( mesh );\n                mesh.geometry.computeBoundingSphere();\n            }\n        }\n\n        renderer = new THREE.WebGLRenderer();\n        renderer.setPixelRatio( window.devicePixelRatio );\n        renderer.setSize( window.innerWidth, window.innerHeight );\n\n        container.appendChild( renderer.domElement );\n\n        controls = new MapControls( camera, renderer.domElement, {\n            target: new THREE.Plane(new THREE.Vector3(0,0,1), 0),\n            minDistance: 2.0,\n            maxDistance: 20\n        });\n\n        window.addEventListener( 'resize', onWindowResize, false );\n        renderer.domElement.addEventListener( 'mousedown', pick);\n        renderer.domElement.addEventListener( 'dblclick', zoomTo );\n    }\n\n    function zoomTo(){\n        if(!selectedObject)\n            return;\n\n        controls.zoomToFit(selectedObject);\n    }\n\n    function pick(event){\n        var mouse = new THREE.Vector2();\n\n        mouse.x = ( event.clientX / renderer.domElement.clientWidth ) * 2 - 1;\n        mouse.y = - ( event.clientY / renderer.domElement.clientHeight ) * 2 + 1;\n\n        var raycaster = new THREE.Raycaster();\n\n        raycaster.setFromCamera(mouse, controls.camera);\n\n        // calculate objects intersecting the picking ray\n        var intersects = raycaster.intersectObjects( scene.children, true );\n        if(intersects.length > 0){\n            selectedObject = intersects[0].object;\n        }else{\n            selectedObject = null;\n        }\n\n    }\n\n    function onWindowResize(){\n        renderer.setSize( window.innerWidth, window.innerHeight );\n        controls.camera.aspect = renderer.domElement.clientWidth / renderer.domElement.clientHeight;\n        controls.camera.updateProjectionMatrix();\n        renderer.setSize( renderer.domElement.clientWidth, renderer.domElement.clientHeight );\n    }\n\n    function animate(){\n        requestAnimationFrame( animate );\n\n        _.each(meshes, function( mesh ){\n            mesh.rotation.x += 0.005;\n            mesh.rotation.y += 0.01;\n        });\n        controls.update();\n        renderer.render( scene, controls.camera );\n    }\n};\n\nif(document.readyState == 'complete')\n    load();\nelse\n    window.onload = load;"],"sourceRoot":""}